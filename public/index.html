<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Almuerzos Perú</title>

    <!-- Preload critical resources -->
    <link rel="preload" href="css/index.css" as="style" />
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&display=swap" as="style" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/index.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" />
    <style>
/* Toast Notifications - Diseño mejorado y visible */
.toast {
    visibility: hidden;
    min-width: 280px;
    max-width: 85vw;
    margin-left: -140px;
    background: linear-gradient(135deg, var(--brand-yellow, #ffd100) 0%, #ffdd33 100%);
    color: var(--brand-dark, #1f2937);
    text-align: center;
    border-radius: 12px;
    padding: 16px 20px;
    position: fixed;
    z-index: 10000;
    left: 50%;
    top: 20px;
    font-size: 14px;
    font-weight: 700;
    box-shadow: 0 8px 25px rgba(255, 209, 0, 0.4);
    border: 2px solid rgba(255, 255, 255, 0.3);
    opacity: 0;
    transform: translateY(-50px);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.toast.show {
    visibility: visible; 
    opacity: 1;
    transform: translateY(0);
}

.toast:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 12px 35px rgba(255, 209, 0, 0.6);
}

.toast.info { 
    background: linear-gradient(135deg, var(--brand-yellow, #ffd100) 0%, #ffdd33 100%);
    color: var(--brand-dark, #1f2937);
}
.toast.success { 
    background: linear-gradient(135deg, var(--brand-green, #00b44e) 0%, #00d056 100%);
    color: white;
}
.toast.error { 
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
    color: white;
}
.toast.warning { 
    background: linear-gradient(135deg, #ff9800 0%, #ffb347 100%);
    color: var(--brand-dark, #1f2937);
}

/* Botones principales - Diseño mejorado y visible */
.cont-but {
    background: linear-gradient(135deg, var(--brand-dark, #1f2937) 0%, #374151 100%);
    color: white;
    border-radius: 12px;
    padding: 12px 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    min-width: 180px;
    height: 56px;
    border: 2px solid transparent;
    box-shadow: 0 4px 15px rgba(31, 41, 55, 0.3);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
}

.cont-but::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,209,0,0.3), transparent);
    transition: left 0.6s;
}

.cont-but:hover::before {
    left: 100%;
}

.cont-but:hover {
    transform: translateY(-6px) scale(1.03);
    box-shadow: 0 15px 40px rgba(255, 209, 0, 0.5);
    background: linear-gradient(135deg, var(--brand-yellow, #ffd100) 0%, #ffdd33 100%);
    color: var(--brand-dark, #1f2937);
    border-color: var(--brand-yellow, #ffd100);
}

.cont-but:active {
    transform: translateY(-2px) scale(1.01);
}

.cont-com {
    background: linear-gradient(135deg, white 0%, #f9fafb 100%);
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    padding: 12px 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 180px;
    height: 56px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--brand-dark, #1f2937);
    position: relative;
    overflow: hidden;
}

.cont-com::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,209,0,0.2), transparent);
    transition: left 0.6s;
}

.cont-com:hover::before {
    left: 100%;
}

.cont-com:hover {
    transform: translateY(-6px) scale(1.03);
    border-color: var(--brand-yellow, #ffd100);
    box-shadow: 0 15px 40px rgba(255, 209, 0, 0.4);
    background: linear-gradient(135deg, #fffbf0 0%, #fff9e6 100%);
}

.cont-com:active {
    transform: translateY(-2px) scale(1.01);
}

/* Header general layout */
.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    min-height: 60px; /* Altura mínima para consistencia */
}

.cont-gen {
    display: flex;
    align-items: center;
    justify-content: flex-end; /* Alinear hacia la derecha */
    flex-direction: row;
    gap: 15px;
}

/* Asegurar que elementos ocultos no ocupen espacio */
.cont-gen > * {
    transition: all 0.3s ease;
}

.cont-gen > *[style*="display: none"] {
    display: none !important;
}

/* Mejorar la distribución cuando hay menos elementos */
.cont-gen:has(> :only-child) {
    justify-content: flex-end;
}

.cont-gen:has(> :first-child[style*="display: none"]) {
    justify-content: flex-end;
}

/* Iconos con animación visible */
.cont-but img, .cont-com img {
    width: 24px;
    height: 24px;
    margin-right: 12px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.cont-but:hover img {
    transform: scale(1.2) rotate(15deg);
    filter: brightness(1.1);
}

.cont-com:hover img {
    transform: scale(1.2) rotate(-10deg);
    filter: brightness(0.9);
}

/* Header button styles */
.header-button {
    background: none;
    border: none;
    font-family: inherit;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    color: inherit;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.header-button:hover {
    transform: scale(1.05);
    text-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* Responsive mejorado */
@media (max-width: 767px) {
    .toast {
        min-width: 260px;
        margin-left: -130px;
        font-size: 13px;
        padding: 14px 18px;
    }
    
    .cont-gen {
        flex-direction: row;
        width: 100%;
        gap: 12px;
        flex-wrap: wrap;
        justify-content: flex-end; /* Mantener alineación a la derecha */
    }
    
    .cont-but, .cont-com {
        min-width: 140px;
        padding: 10px 18px;
        height: 48px;
        font-size: 12px;
    }
    
    .cont-but:hover, .cont-com:hover {
        transform: translateY(-3px) scale(1.02);
    }
    
    .cont-but img, .cont-com img {
        width: 20px;
        height: 20px;
        margin-right: 8px;
    }
    
    .header-button {
        font-size: 12px;
    }
}

@media (max-width: 480px) {
    .toast {
        min-width: 240px;
        margin-left: -120px;
        font-size: 12px;
        padding: 12px 16px;
    }
    
    .cont-gen {
        flex-direction: column;
        gap: 12px;
        width: 100%;
        align-items: center; /* Centrar en móviles muy pequeños */
    }
    
    .cont-but, .cont-com {
        width: 100%;
        max-width: 280px;
    }
}
    </style>
  </head>
  <body>
    <header class="main-header">
      <div class="container header-content">
        <a href="index.html" style="text-decoration: none; color: inherit">
          <span style="display: flex; align-items: center; gap: 0.5rem; margin: 1.5rem;">
            <img
              src="images/Logo-Almuerzo-Perú.png"
              alt="Logo Almuerzos Perú"
              style="height: 22px; width: auto; margin-right: 0.1rem; vertical-align: middle;"
            />
            <h1
              style="margin: 0; font-size: 1.5rem; font-weight: 800; cursor: pointer; letter-spacing: -1px; background: none;"
              onmouseover="this.style.opacity='0.8'"
              onmouseout="this.style.opacity='1'"
            >
              <span style="color: #1f2937">Almuerzos</span><span style="color: #ff8c00">Perú</span>
            </h1>
          </span>
        </a>

        <div class="cont-gen">
          <div class="cont-com">
            <img style="width: 25px" src="images/login.svg" alt="Login Icon" />
            <button id="my-account-btn" class="header-button">
              Soy Comensal
            </button>
            <span id="favorites-count-display" style="display: none">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-heart"
              >
                <path
                  d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                ></path>
              </svg>
              <span id="favorites-counter">0</span>
            </span>
            <span
              id="logout-text"
              style="
                display: none;
                margin-left: 10px;
                cursor: pointer;
                color: #555;
                font-size: 0.9em;
              "
              >(Cerrar Sesión)</span
            >
          </div>

          <div class="cont-but" id="my-restaurant">
            <img
              style="width: 25px"
              src="images/restauranteb.png"
              alt="Restaurant Icon"
            />
             <button id="my-restaurant-btn" class="header-button header-button--alt">
           Mi Restaurante
          </button> 
          </div>
        </div>
    </header>

    <div class="hero-section">
      <h2>Encuentra tu menú diario</h2>
      <p>¡sin perder tiempo! 🏠</p>
    </div>

     <main class="main-content container">
      <div class="district-search-container">
        <div class="search-wrapper">
          <div class="search-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <input type="text" id="district-search" placeholder="Buscar por distrito, restaurante o platillo" autocomplete="off" />
          <button class="location-btn" id="location-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 10C21 17 12 23 12 23S3 17 3 10C3 5.02944 7.02944 1 12 1C16.9706 1 21 5.02944 21 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div class="dropdown-arrow">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        <div class="custom-dropdown" id="custom-dropdown">
          <div class="dropdown-content" id="dropdown-content">
            <!-- Las opciones se cargarán dinámicamente -->
          </div>
        </div>
      </div>

      <div class="available-restaurants">
        <div class="available-restaurants-content">
          <svg class="available-restaurants-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Plato -->
            <circle cx="12" cy="14" r="8" fill="#f5f5f5" stroke="#ddd" stroke-width="2"/>
            <circle cx="12" cy="14" r="6" fill="#fff" stroke="#e0e0e0" stroke-width="1"/>
            <!-- Tenedor -->
            <path d="M6 3V11" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M5 3V8" stroke="#666" stroke-width="1" stroke-linecap="round"/>
            <path d="M7 3V8" stroke="#666" stroke-width="1" stroke-linecap="round"/>
            <!-- Cuchillo -->
            <path d="M18 3V11" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M17.5 3L18.5 4L17.5 5" stroke="#666" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/>
            <!-- Comida en el plato -->
            <circle cx="10" cy="13" r="1.5" fill="#ff9800"/>
            <circle cx="14" cy="15" r="1" fill="#4caf50"/>
            <circle cx="12" cy="16" r="0.8" fill="#f44336"/>
          </svg>
          <span class="available-restaurants-text">Restaurantes disponibles</span>
          <span class="available-restaurants-count"></span>
        </div>
      </div>

      <div id="restaurants-list" class="restaurant-grid">
        <p style="text-align: center; grid-column: 1 / -1">
          Cargando restaurantes...
        </p>
      </div>

      <div class="see-more-container">
        <button id="load-more-btn" class="see-more-button">Ver más</button>
      </div>

      <div id="toast-notification" class="toast"></div>
    </main>

    <div id="login-modal-overlay" class="login-modal-overlay">
      <div class="login-modal-content">
        <button class="login-modal-close-btn" id="login-modal-close-btn">
          &times;
        </button>
        <h2>¡Bienvenido!</h2>
        <p>
          Únete para poder ver las cartas completas de nuestros restaurantes
          selectos.
        </p>
        <button id="google-login-btn">
          <img
            src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
            alt="Google icon"
          />
          Unirse con Google
        </button>
      </div>
    </div>
    
    <!-- Firebase scripts must load before our scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js" defer></script>

    <script src="js/index.js" defer></script>
  </body>
</html>
